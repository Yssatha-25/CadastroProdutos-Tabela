<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Produtos</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h1>Gerenciador de Produtos</h1>

    <div id="TabelaProdutos">
        <button id="botaoCadastrarProduto" onclick="MostrarCadastro()">Cadastrar produto</button>
        <br><br>


        <table border="1">
            <tr>
                <th>Descrição</th>
                <th>Preço</th>
                <th>Quantidade</th>
                <th>Valor total</th>
            </tr>
            <tbody id="tabelaCorpo"></tbody>
        </table>
    </div>

    <div id="CadastroProdutos" class="hidden">
        <p>Nome<input type="text" placeholder="Digite seu nome" id="produtoInput"></p>
        <p>Preço<input type="number" placeholder="Digite o preço do produto" id="precoInput"></p>
        <p>Quantidade<input type="number" placeholder="Informe a quantidade de unidades desse produto" id="qntdInput"></p>
        <br>
        <button onclick="CadastrarProduto()">Salvar</button>
        <button onclick="FecharCadastro()">Cancelar</button>
    </div>

    <script>
        const produtos=[]
        const precos=[]
        const quantidades=[]
        const valores=[]

        let produto=document.getElementById("produtoInput")
        let preco=document.getElementById("precoInput")
        let quantidade=document.getElementById("qntdInput")

        const tabelaCorpo=document.getElementById("tabelaCorpo")
        const TabelaProdutos=document.getElementById("TabelaProdutos")
    
        function CadastrarProduto(){
            let existeProduto=produtos.includes(produto.value)
          
            if(existeProduto==false && produto.value!="" && preco.value!="" && quantidade.value!=""){
                produtos.push(produto.value)
                precos.push(preco.value)
                quantidades.push(quantidade.value)
                valores.push(parseFloat(preco.value) * parseInt(quantidade.value)) // parseFloat converte para número decimal e a parseInt para inteiro

                alert("O produto foi castrado com sucesso!")

                FecharCadastro()
                RenderizarTabela()
            }
            else{
                alert("Produto invalido.")
                // alertaCadastroInvalido()
            }

            console.log(produtos, precos, quantidades, valores)
        }

        function MostrarCadastro() {
            document.getElementById("TabelaProdutos").classList.add("hidden")
            document.getElementById("CadastroProdutos").classList.remove("hidden")
        }

        function FecharCadastro() {
            produto.value=""
            preco.value=""
            quantidade.value=""
            document.getElementById("CadastroProdutos").classList.add("hidden")
            document.getElementById("TabelaProdutos").classList.remove("hidden")
        }


        function RenderizarTabela(){
            tabelaCorpo.innerHTML=""

            for(let i=0; i<produtos.length; i++){
                const linha=document.createElement("tr")
                    linha.innerHTML= `
                        <td> ${produtos[i]} </td>
                        <td> ${precos[i]} R$ </td>
                        <td> ${quantidades[i]} </td>
                        <td> ${valores[i]} R$ </td>
                        <button onclick="RemoverProduto(${i})" id="botaoRemoverProduto">Remover produto</button>
                `
                tabelaCorpo.appendChild(linha)
            }
        }

        function RemoverProduto(indice){
            produtos.splice(indice, 1)
            precos.splice(indice, 1)
            quantidades.splice(indice, 1)
            valores.splice(indice, 1)

            console.log(produtos, precos, quantidades, valores)

            RenderizarTabela()
        }
        

        


    </script>
</body>

</html>